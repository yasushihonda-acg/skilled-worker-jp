<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>skilled-worker-jp ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Source+Code+Pro:wght@400;500&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f8f9fa;
      color: #1a1a1a;
      line-height: 1.8;
      font-size: 15px;
    }

    /* Sidebar */
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 260px;
      height: 100vh;
      background: #fff;
      border-right: 1px solid #e5e7eb;
      padding: 24px 0;
      overflow-y: auto;
    }

    .sidebar-header {
      padding: 0 20px 20px;
      border-bottom: 1px solid #e5e7eb;
      margin-bottom: 16px;
    }

    .sidebar-title {
      font-size: 16px;
      font-weight: 700;
      color: #00a3a9;
    }

    .sidebar-subtitle {
      font-size: 12px;
      color: #6b7280;
      margin-top: 4px;
    }

    .nav-section {
      padding: 0 12px;
      margin-bottom: 20px;
    }

    .nav-section-title {
      font-size: 11px;
      font-weight: 700;
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      padding: 8px;
      margin-bottom: 4px;
    }

    .nav-link {
      display: block;
      padding: 8px 12px;
      color: #4b5563;
      text-decoration: none;
      font-size: 14px;
      border-radius: 6px;
      transition: all 0.15s;
    }

    .nav-link:hover {
      background: #f3f4f6;
      color: #1a1a1a;
    }

    .nav-link.active {
      background: #e0f7f8;
      color: #00a3a9;
      font-weight: 500;
    }

    /* Main Content */
    .main {
      margin-left: 260px;
      min-height: 100vh;
    }

    .content {
      max-width: 900px;
      margin: 0 auto;
      padding: 40px;
    }

    /* Typography */
    h1 {
      font-size: 28px;
      font-weight: 700;
      color: #1a1a1a;
      margin-bottom: 8px;
      padding-bottom: 16px;
      border-bottom: 2px solid #00a3a9;
    }

    h2 {
      font-size: 20px;
      font-weight: 700;
      color: #1a1a1a;
      margin: 40px 0 16px;
      padding-bottom: 8px;
      border-bottom: 1px solid #e5e7eb;
    }

    h3 {
      font-size: 16px;
      font-weight: 700;
      color: #374151;
      margin: 24px 0 12px;
    }

    p {
      margin-bottom: 16px;
      color: #4b5563;
    }

    .lead {
      font-size: 16px;
      color: #6b7280;
      margin-bottom: 32px;
    }

    /* Badge */
    .badge {
      display: inline-block;
      padding: 4px 10px;
      background: #e0f7f8;
      color: #00a3a9;
      font-size: 12px;
      font-weight: 500;
      border-radius: 4px;
      margin-bottom: 16px;
    }

    /* Table */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 16px 0 24px;
      font-size: 14px;
    }

    th, td {
      padding: 12px 16px;
      text-align: left;
      border: 1px solid #e5e7eb;
    }

    th {
      background: #f9fafb;
      font-weight: 600;
      color: #374151;
    }

    td {
      background: #fff;
    }

    /* Code Block */
    .code-block {
      background: #1e293b;
      border-radius: 8px;
      overflow: hidden;
      margin: 16px 0 24px;
    }

    .code-header {
      background: #334155;
      padding: 8px 16px;
      font-family: 'Source Code Pro', monospace;
      font-size: 12px;
      color: #94a3b8;
    }

    .code-content {
      padding: 16px;
      font-family: 'Source Code Pro', monospace;
      font-size: 13px;
      line-height: 1.6;
      color: #e2e8f0;
      overflow-x: auto;
    }

    .code-content .comment { color: #64748b; }
    .code-content .keyword { color: #c084fc; }
    .code-content .string { color: #4ade80; }
    .code-content .function { color: #60a5fa; }

    /* Cards Grid */
    .cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 16px;
      margin: 16px 0 24px;
    }

    .card {
      background: #fff;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 20px;
    }

    .card-icon {
      font-size: 24px;
      margin-bottom: 12px;
    }

    .card-title {
      font-size: 15px;
      font-weight: 600;
      color: #1a1a1a;
      margin-bottom: 8px;
    }

    .card-desc {
      font-size: 13px;
      color: #6b7280;
    }

    /* Language Pills */
    .lang-list {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 16px 0 24px;
    }

    .lang-pill {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      background: #fff;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      font-size: 14px;
    }

    .lang-pill code {
      font-family: 'Source Code Pro', monospace;
      font-size: 12px;
      color: #6b7280;
    }

    /* Steps */
    .steps {
      margin: 16px 0 24px;
    }

    .step {
      display: flex;
      gap: 16px;
      padding: 16px 0;
      border-bottom: 1px solid #f3f4f6;
    }

    .step:last-child {
      border-bottom: none;
    }

    .step-number {
      width: 32px;
      height: 32px;
      background: #00a3a9;
      color: #fff;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 14px;
      flex-shrink: 0;
    }

    .step-content h4 {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .step-content p {
      font-size: 14px;
      color: #6b7280;
      margin: 0;
    }

    /* Mermaid */
    .mermaid-wrapper {
      background: #fff;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 24px;
      margin: 16px 0 24px;
      overflow-x: auto;
    }

    .mermaid {
      display: flex;
      justify-content: center;
    }

    /* Info Box */
    .info-box {
      background: #eff6ff;
      border: 1px solid #bfdbfe;
      border-radius: 8px;
      padding: 16px 20px;
      margin: 16px 0 24px;
    }

    .info-box-title {
      font-size: 14px;
      font-weight: 600;
      color: #1e40af;
      margin-bottom: 8px;
    }

    .info-box p {
      font-size: 14px;
      color: #1e40af;
      margin: 0;
    }

    /* Responsive */
    @media (max-width: 900px) {
      .sidebar {
        display: none;
      }
      .main {
        margin-left: 0;
      }
      .content {
        padding: 24px 16px;
      }
    }
  </style>
</head>
<body>
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-title">skilled-worker-jp</div>
      <div class="sidebar-subtitle">System Documentation</div>
    </div>

    <nav class="nav-section">
      <div class="nav-section-title">æ¦‚è¦</div>
      <a href="#overview" class="nav-link active">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦</a>
      <a href="#features" class="nav-link">ä¸»è¦æ©Ÿèƒ½</a>
      <a href="#languages" class="nav-link">å¯¾å¿œè¨€èª</a>
    </nav>

    <nav class="nav-section">
      <div class="nav-section-title">ä¸€èˆ¬å‘ã‘</div>
      <a href="#user-flow" class="nav-link">åˆ©ç”¨ã®æµã‚Œ</a>
      <a href="#registration" class="nav-link">ç™»éŒ²ã‚¹ãƒ†ãƒƒãƒ—</a>
    </nav>

    <nav class="nav-section">
      <div class="nav-section-title">æŠ€è¡“ä»•æ§˜</div>
      <a href="#tech-stack" class="nav-link">æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯</a>
      <a href="#architecture" class="nav-link">ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</a>
      <a href="#request-flow" class="nav-link">ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ•ãƒ­ãƒ¼</a>
      <a href="#directory" class="nav-link">ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ </a>
      <a href="#api" class="nav-link">APIå®Ÿè£…</a>
      <a href="#deploy" class="nav-link">ãƒ‡ãƒ—ãƒ­ã‚¤</a>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="main">
    <div class="content">

      <!-- Overview -->
      <section id="overview">
        <span class="badge">Internal Documentation</span>
        <h1>skilled-worker-jp ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦</h1>
        <p class="lead">ç‰¹å®šæŠ€èƒ½å¤–å›½äººå‘ã‘äººæå‹Ÿé›†ã‚µã‚¤ãƒˆã®ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆã¨æŠ€è¡“ä»•æ§˜ã‚’ã¾ã¨ã‚ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã™ã€‚</p>

        <div class="info-box">
          <div class="info-box-title">é‹å–¶ä¼šç¤¾</div>
          <p>ã‚ãŠãã‚‰ã‚±ã‚¢ã‚°ãƒ«ãƒ¼ãƒ— - é¹¿å…å³¶ãƒ»ç¦å²¡ã§50ä»¥ä¸Šã®ä»‹è­·ãƒ»ç¦ç¥‰æ–½è¨­ã‚’é‹å–¶</p>
        </div>

        <table>
          <tr>
            <th>é …ç›®</th>
            <th>å†…å®¹</th>
          </tr>
          <tr>
            <td>ç›®çš„</td>
            <td>æŠ€èƒ½å®Ÿç¿’ç”Ÿï¼ˆ3å¹´ä»¥ä¸Šæ»åœ¨ï¼‰ã‚’ç‰¹å®šæŠ€èƒ½ã¸ç§»è¡Œã•ã›ã‚‹ãŸã‚ã®æ±‚è·è€…ç™»éŒ²</td>
          </tr>
          <tr>
            <td>ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ</td>
            <td>ã‚¤ãƒ³ãƒ‰ãƒã‚·ã‚¢ã€ãƒãƒ‘ãƒ¼ãƒ«ã€ãƒŸãƒ£ãƒ³ãƒãƒ¼ã®å¤–å›½äººåŠ´åƒè€…</td>
          </tr>
          <tr>
            <td>å¯¾è±¡æ¥­ç¨®</td>
            <td>ä»‹è­·ï¼ˆå°†æ¥çš„ã«å…¨æ¥­ç¨®å¯¾å¿œäºˆå®šï¼‰</td>
          </tr>
          <tr>
            <td>æœ¬ç•ªURL</td>
            <td><a href="https://skilled-worker-jp-ih4hgkgkfa-an.a.run.app">skilled-worker-jp-ih4hgkgkfa-an.a.run.app</a></td>
          </tr>
        </table>
      </section>

      <!-- Features -->
      <section id="features">
        <h2>ä¸»è¦æ©Ÿèƒ½</h2>

        <div class="cards-grid">
          <div class="card">
            <div class="card-icon">ğŸŒ</div>
            <div class="card-title">å¤šè¨€èªå¯¾å¿œ</div>
            <div class="card-desc">5è¨€èªï¼ˆæ—¥æœ¬èªãƒ»è‹±èªãƒ»ã‚¤ãƒ³ãƒ‰ãƒã‚·ã‚¢èªãƒ»ãƒãƒ‘ãƒ¼ãƒ«èªãƒ»ãƒ“ãƒ«ãƒèªï¼‰ã«å¯¾å¿œ</div>
          </div>
          <div class="card">
            <div class="card-icon">ğŸ“</div>
            <div class="card-title">æ±‚è·è€…ç™»éŒ²</div>
            <div class="card-desc">3ã‚¹ãƒ†ãƒƒãƒ—ã§åŸºæœ¬æƒ…å ±ãƒ»åœ¨ç•™è³‡æ ¼ãƒ»é€£çµ¡å…ˆã‚’ç™»éŒ²</div>
          </div>
          <div class="card">
            <div class="card-icon">ğŸ¤–</div>
            <div class="card-title">AIãƒãƒ£ãƒƒãƒˆ</div>
            <div class="card-desc">Vertex AI (Gemini)ã«ã‚ˆã‚‹24æ™‚é–“ç›¸è«‡å¯¾å¿œ</div>
          </div>
        </div>
      </section>

      <!-- Languages -->
      <section id="languages">
        <h2>å¯¾å¿œè¨€èª</h2>

        <div class="lang-list">
          <div class="lang-pill">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª <code>ja</code></div>
          <div class="lang-pill">ğŸ‡¬ğŸ‡§ English <code>en</code></div>
          <div class="lang-pill">ğŸ‡®ğŸ‡© Indonesia <code>id</code></div>
          <div class="lang-pill">ğŸ‡³ğŸ‡µ à¤¨à¥‡à¤ªà¤¾à¤²à¥€ <code>ne</code></div>
          <div class="lang-pill">ğŸ‡²ğŸ‡² á€™á€¼á€”á€ºá€™á€¬ <code>my</code></div>
        </div>
      </section>

      <!-- User Flow -->
      <section id="user-flow">
        <h2>åˆ©ç”¨ã®æµã‚Œ</h2>
        <p>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ä»¥ä¸‹ã®4ã‚¹ãƒ†ãƒƒãƒ—ã§ç™»éŒ²ã‹ã‚‰å°±è·ã¾ã§é€²ã¿ã¾ã™ã€‚</p>

        <div class="mermaid-wrapper">
          <div class="mermaid">
flowchart LR
    A[ğŸ“ ç™»éŒ²] --> B[ğŸ’¬ é¢è«‡]
    B --> C[ğŸ” ç´¹ä»‹]
    C --> D[ğŸ‰ å°±è·]
          </div>
        </div>
      </section>

      <!-- Registration -->
      <section id="registration">
        <h2>ç™»éŒ²ã‚¹ãƒ†ãƒƒãƒ—</h2>

        <div class="steps">
          <div class="step">
            <div class="step-number">1</div>
            <div class="step-content">
              <h4>åŸºæœ¬æƒ…å ±</h4>
              <p>æ°åãƒ»ç”Ÿå¹´æœˆæ—¥ãƒ»æ€§åˆ¥ãƒ»å›½ç±ã‚’å…¥åŠ›</p>
            </div>
          </div>
          <div class="step">
            <div class="step-number">2</div>
            <div class="step-content">
              <h4>åœ¨ç•™è³‡æ ¼ãƒ»ã‚¹ã‚­ãƒ«</h4>
              <p>åœ¨ç•™è³‡æ ¼ãƒ»æœŸé™ãƒ»æ—¥æœ¬èªãƒ¬ãƒ™ãƒ«ãƒ»å¸Œæœ›è·ç¨®ã‚’é¸æŠ</p>
            </div>
          </div>
          <div class="step">
            <div class="step-number">3</div>
            <div class="step-content">
              <h4>é€£çµ¡å…ˆ</h4>
              <p>LINE IDç­‰ã®é€£çµ¡å…ˆã‚’å…¥åŠ›ã—ã¦å®Œäº†</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Tech Stack -->
      <section id="tech-stack">
        <h2>æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯</h2>

        <table>
          <tr>
            <th>ãƒ¬ã‚¤ãƒ¤ãƒ¼</th>
            <th>æŠ€è¡“</th>
            <th>è©³ç´°</th>
          </tr>
          <tr>
            <td>Frontend</td>
            <td>Next.js 14</td>
            <td>App Router / React Server Components</td>
          </tr>
          <tr>
            <td>Styling</td>
            <td>Tailwind CSS</td>
            <td>utility-first CSS</td>
          </tr>
          <tr>
            <td>i18n</td>
            <td>next-intl</td>
            <td>5è¨€èªå¯¾å¿œ</td>
          </tr>
          <tr>
            <td>AI</td>
            <td>Vertex AI</td>
            <td>Gemini 2.5 Flash / asia-northeast1</td>
          </tr>
          <tr>
            <td>Infrastructure</td>
            <td>Cloud Run</td>
            <td>Workload Identityèªè¨¼</td>
          </tr>
          <tr>
            <td>CI/CD</td>
            <td>Cloud Build</td>
            <td>GitHubé€£æºè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤</td>
          </tr>
          <tr>
            <td>Container</td>
            <td>Artifact Registry</td>
            <td>Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ç®¡ç†</td>
          </tr>
        </table>
      </section>

      <!-- Architecture -->
      <section id="architecture">
        <h2>ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</h2>

        <div class="mermaid-wrapper">
          <div class="mermaid">
flowchart TB
    subgraph Client
        Browser[Browser]
    end

    subgraph CloudRun[Cloud Run]
        NextJS[Next.js 14]
        API[API Routes]
    end

    subgraph GCP[Google Cloud]
        VertexAI[Vertex AI]
        Firestore[Firestore]
    end

    subgraph CICD[CI/CD]
        GitHub[GitHub]
        CloudBuild[Cloud Build]
        AR[Artifact Registry]
    end

    Browser --> NextJS
    NextJS --> API
    API --> VertexAI
    API -.-> Firestore

    GitHub --> CloudBuild
    CloudBuild --> AR
    AR --> CloudRun
          </div>
        </div>
      </section>

      <!-- Request Flow -->
      <section id="request-flow">
        <h2>ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ•ãƒ­ãƒ¼</h2>

        <div class="mermaid-wrapper">
          <div class="mermaid">
sequenceDiagram
    participant U as User
    participant N as Next.js
    participant A as API Route
    participant V as Vertex AI

    U->>N: Access /{locale}/
    N->>U: Render LP

    U->>A: POST /api/chat
    A->>V: generateContent()
    V->>A: Response
    A->>U: AI Response

    U->>N: Navigate /register
    U->>A: POST /api/register
    A->>U: Success
          </div>
        </div>
      </section>

      <!-- Directory -->
      <section id="directory">
        <h2>ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ </h2>

        <div class="code-block">
          <div class="code-header">project structure</div>
          <div class="code-content">src/
â”œâ”€â”€ app/
â”‚   â””â”€â”€ [locale]/           <span class="comment"># å¤šè¨€èªãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</span>
â”‚       â”œâ”€â”€ page.tsx        <span class="comment"># LP</span>
â”‚       â”œâ”€â”€ register/       <span class="comment"># ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ </span>
â”‚       â””â”€â”€ layout.tsx      <span class="comment"># å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ</span>
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                 <span class="comment"># åŸºæœ¬UI</span>
â”‚   â”œâ”€â”€ layout/             <span class="comment"># Header, Footer</span>
â”‚   â””â”€â”€ chat/               <span class="comment"># ChatWidget</span>
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ vertexai.ts         <span class="comment"># AIè¨­å®š</span>
â””â”€â”€ messages/
    â”œâ”€â”€ ja.json             <span class="comment"># æ—¥æœ¬èª</span>
    â”œâ”€â”€ en.json             <span class="comment"># è‹±èª</span>
    â”œâ”€â”€ id.json             <span class="comment"># ã‚¤ãƒ³ãƒ‰ãƒã‚·ã‚¢èª</span>
    â”œâ”€â”€ ne.json             <span class="comment"># ãƒãƒ‘ãƒ¼ãƒ«èª</span>
    â””â”€â”€ my.json             <span class="comment"># ãƒ“ãƒ«ãƒèª</span></div>
        </div>
      </section>

      <!-- API -->
      <section id="api">
        <h2>APIå®Ÿè£…</h2>

        <h3>Chat API</h3>
        <div class="code-block">
          <div class="code-header">src/app/api/chat/route.ts</div>
          <div class="code-content"><span class="keyword">import</span> { VertexAI } <span class="keyword">from</span> <span class="string">'@google-cloud/vertexai'</span>;
<span class="keyword">import</span> { SYSTEM_PROMPT } <span class="keyword">from</span> <span class="string">'@/lib/vertexai'</span>;

<span class="keyword">const</span> vertexAI = <span class="keyword">new</span> <span class="function">VertexAI</span>({
  project: process.env.GOOGLE_CLOUD_PROJECT,
  location: <span class="string">'asia-northeast1'</span>,
});

<span class="keyword">const</span> model = vertexAI.<span class="function">getGenerativeModel</span>({
  model: <span class="string">'gemini-2.5-flash'</span>,
});

<span class="keyword">export async function</span> <span class="function">POST</span>(request: Request) {
  <span class="keyword">const</span> { message, history } = <span class="keyword">await</span> request.<span class="function">json</span>();

  <span class="keyword">const</span> chat = model.<span class="function">startChat</span>({
    history,
    systemInstruction: SYSTEM_PROMPT,
  });

  <span class="keyword">const</span> result = <span class="keyword">await</span> chat.<span class="function">sendMessage</span>(message);
  <span class="keyword">return</span> Response.<span class="function">json</span>({
    response: result.response.<span class="function">text</span>()
  });
}</div>
        </div>

        <h3>ç’°å¢ƒå¤‰æ•°</h3>
        <div class="code-block">
          <div class="code-header">.env.local</div>
          <div class="code-content"><span class="comment"># GCP Project</span>
GOOGLE_CLOUD_PROJECT=your-project-id

<span class="comment"># Vertex AI</span>
VERTEX_AI_LOCATION=asia-northeast1

<span class="comment"># Local development only</span>
GOOGLE_APPLICATION_CREDENTIALS=./service-account.json</div>
        </div>
      </section>

      <!-- Deploy -->
      <section id="deploy">
        <h2>ãƒ‡ãƒ—ãƒ­ã‚¤</h2>

        <h3>ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ•ãƒ­ãƒ¼</h3>
        <div class="mermaid-wrapper">
          <div class="mermaid">
flowchart LR
    A[git push] --> B[Cloud Build]
    B --> C[Docker Build]
    C --> D[Artifact Registry]
    D --> E[Cloud Run]
    E --> F[Live]
          </div>
        </div>

        <h3>é–‹ç™ºã‚³ãƒãƒ³ãƒ‰</h3>
        <div class="code-block">
          <div class="code-header">terminal</div>
          <div class="code-content"><span class="comment"># é–‹ç™ºã‚µãƒ¼ãƒãƒ¼</span>
npm run dev

<span class="comment"># ãƒ“ãƒ«ãƒ‰</span>
npm run build

<span class="comment"># å‹ãƒã‚§ãƒƒã‚¯</span>
npm run type-check

<span class="comment"># æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤</span>
git push origin main</div>
        </div>
      </section>

    </div>
  </main>

  <!-- Mermaid -->
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';

    mermaid.initialize({
      startOnLoad: true,
      theme: 'base',
      themeVariables: {
        primaryColor: '#e0f7f8',
        primaryTextColor: '#1a1a1a',
        primaryBorderColor: '#00a3a9',
        lineColor: '#9ca3af',
        secondaryColor: '#f3f4f6',
        tertiaryColor: '#fff',
        background: '#fff',
        mainBkg: '#e0f7f8',
        nodeBorder: '#00a3a9',
        clusterBkg: '#f9fafb',
        clusterBorder: '#e5e7eb',
        titleColor: '#1a1a1a',
        actorBkg: '#e0f7f8',
        actorBorder: '#00a3a9',
        actorTextColor: '#1a1a1a',
        signalColor: '#4b5563',
        signalTextColor: '#1a1a1a'
      },
      flowchart: {
        curve: 'basis',
        padding: 20,
        htmlLabels: true
      }
    });
  </script>

  <!-- Smooth scroll -->
  <script>
    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const targetId = this.getAttribute('href').slice(1);
        const target = document.getElementById(targetId);
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
          this.classList.add('active');
        }
      });
    });

    // Update active nav on scroll
    window.addEventListener('scroll', () => {
      const sections = document.querySelectorAll('section[id]');
      let current = '';
      sections.forEach(section => {
        const sectionTop = section.offsetTop - 100;
        if (window.scrollY >= sectionTop) {
          current = section.getAttribute('id');
        }
      });
      document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === '#' + current) {
          link.classList.add('active');
        }
      });
    });
  </script>
</body>
</html>
